<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="viewBranchMapper">

	<!-- viewBranchList -->
	<select id="getListCount" resultType="_int">
		select count(*)
		from branch
	</select>
	<select id="selectBranchList" resultMap="branchResultSet">
		select *
		from branch
		order by branch_no
	</select>
	<resultMap id="branchResultSet" type="ViewBranch">
		<id property="branchNo" column="BRANCH_NO"/>
		<result property="branchName" column="BRANCH_NAME"/>
		<result property="branchAddress" column="BRANCH_ADDRESS"/>
		<result property="branchTel" column="BRANCH_TEL"/>
		<result property="branchContent" column="BRANCH_CONTENT"/>
		<result property="branchTime" column="BRANCH_TIME"/>
		<result property="branchRest" column="BRANCH_REST"/>
		<result property="originalFileName" column="ORGINAL_FILENAME"/>
		<result property="renameFileName" column="RENAME_FILENAME"/>
		
	</resultMap>
	
	<!-- viewBranchDetail -->
	<select id="selectBranch" parameterType="_int" resultMap="branchResultSet">
		select *
		from branch
		where branch_no = #{branchNo}
	</select>
	
	<insert id="insertBranchPhoto">
		insert into branch_photo
		values(seq_photoid.nextval, #{branchNo}, #{orginaleFileName}, #{bpPath}, #{bpLevel}, #{bpStatus}, #{renameFileName})
	</insert>

  <!-- 지점 등록 -->
	<!-- 지점명 중복체크 -->
	<select id="checkNameDup" parameterType="string" resultType="_int">
		select count(*)
		from branch
		where branch__name=#{branch_Name}
	</select>
</mapper>
